(function($){var p=function(c,d){var e=$('<div></div>');var f=$('<div></div>');var g=$('<div></div>');var h=$('<div></div>');var i=$('<div></div>');var j=$('<div></div>');var l=$('<a href="javascript:void(0);"></a>');var m=$('<div></div>');var n=$(window).outerWidth();var o=$(window).outerHeight();f.addClass('window');f.attr('id',d.id);f.width(d.width);f.css('left',(n-d.width)/2);f.css('top',(o-d.height-60)/2);f.css('z-index',d.z_index);l.addClass('window-tool-close');l.click(function(){c.removeData('sgWindow');var a="#"+d.id+"_mask";$(a).remove();var b="#"+d.id;$(b).remove()});j.addClass('window-tool');j.append(l);i.addClass('window-title');i.append(d.title);g.addClass('window-header');g.width(d.width);g.append(i);g.append(j);f.append(g);h.addClass('window-body');h.height(d.height-25);h.load(d.url,{},d.success);f.append(h);if(d.buttons){m.addClass('window-footer');m.addClass('window-body-noheader');m.addClass('window-body-noborder');m.css('text-align','center');m.css('padding-top','5px');m.width(d.width);$.each(d.buttons,function(k,v){if(v.type=='submit'){var a=$('<input type="submit">');a.attr('form',d.form);a.val(v.name);a.css('margin-right','10px');if(v.onpress){a.click(function(){(v.onpress)()})};m.append(a)}else if(v.type=='reset'){var a=$('<input type="reset">');a.attr('form',d.form);a.val(v.name);a.css('margin-right','10px');if(v.onpress){a.click(function(){(v.onpress)()})};m.append(a)}else{var a=$('<input type="button">');a.attr('form',d.form);a.val(v.name);a.css('margin-right','10px');if(v.onpress){a.click(function(){(v.onpress)()})};m.append(a)}});f.append(m)};f.show();e.addClass('window-mask');e.attr('id',d.id+"_mask");e.show();$(document.body).append(e);$(document.body).append(f);r.Register(f,g)};var q={init:function(d){return this.each(function(){var a=$(this);var b=a.data('sgWindow');if(typeof(b)=='undefined'){var c={id:false,title:false,url:false,width:300,height:200,z_index:9000};b=$.extend({},c,d);a.data('sgWindow',b)}else{b=$.extend({},b,d)};p(a,b)})},close:function(a){var b="#"+a.id+"_mask";$(b).remove();$("#"+a.id).remove();$(this).removeData('sgWindow')},destroy:function(b){return $(this).each(function(){var a=$(this);a.removeData('sgWindow')})},val:function(a){var b=this.eq(0).html();return b}};$.fn.sgWindow=function(){var a=arguments[0];if(q[a]){a=q[a];arguments=Array.prototype.slice.call(arguments,1)}else if(typeof(a)=='object'||!a){a=q.init}else{$.error('Method '+a+' does not exist on jQuery.sgWindow');return this};return a.apply(this,arguments)};var r=function(){var c;var d;var e;var f;var g=false;var h;var i;var j=function(a){return a.ownerDocument||a.document};var k=function(a){if(f){a=a||window.event;c=document.body.clientWidth;d=document.documentElement.scrollHeight;$("#jd_dialog_m_b_1").css("display","");g=true;h={x:$(f).offset().left,y:$(f).offset().top};i={x:a.screenX,y:a.screenY};$(document).bind("mousemove",l);$(document).bind("mouseup",m);if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}}};var l=function(a){if(g){a=a||window.event;var b={x:a.screenX,y:a.screenY};h.x=h.x+(b.x-i.x);h.y=h.y+(b.y-i.y);i=b;$(f).css("left",h.x+"px");$(f).css("top",h.y+"px");if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}}};var m=function(a){if(g){a=a||window.event;$("#jd_dialog_m_b_1").css("display","none");n();g=false}};var n=function(){if(e){$(e.document).unbind("mousemove");$(e.document).unbind("mouseup")}};return{Register:function(a,b){f=a;e=b;$(e).bind("mousedown",k)}}}()})(jQuery);