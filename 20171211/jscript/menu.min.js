(function($){var q=function(d,e){$.ajax({type:"POST",async:false,contentType:'application/json',url:e.url,dataType:'json',success:function(a){var b=$("<ul></ul>");r(a,b,e);d.append(b);a=null},error:function(a,b,c){}})};var r=function(n,o,p){$.each(n,function(k,v){if(p.level==1||p.level==0){var h=$("<li></li>");var i=$("<a></a>");var j=$("<img>");j.attr('src','images/'+v.type+'.png');i.append(j);i.on("click",function(){(p.onclick)(v)});h.append(i);if(p.level==0){var l=v.items;if(l&&l.length>0){var m=$("<ul></ul>");$.each(l,function(a,b){var c=$("<li></li>");var d=$("<a></a>");d.append(b.name);d.on("click",function(){(p.onclick)(b)});c.append(d);m.append(c);var e=b.items;if(e!=null&&e.length>0){var f=$("<ul></ul>");r(e,f,p);c.addClass('menu-rightarrow');c.append(f)}});h.append(m)}}o.append(h)};if(p.level==2&&p.parentMenu!=null&&p.rendto!=null){if(v.type==p.parentMenu){var l=v.items;if(l&&l.length>0){var m=$("<ul></ul>");m.css('margin-top','18px');$.each(l,function(a,b){var c=$("<li></li>");var d=$("<a></a>");var e=$("<img>");e.attr('src','images/'+b.type+'.png');e.attr('alt',b.name);d.css('padding','10px');d.css('cursor','pointer');d.append(e);d.on("click",function(){(p.onclick)(b)});c.append(d);c.css('margin-top','10px');m.append(c);var f=b.items;if(f!=null&&f.length>0){var g=$("<ul></ul>");r(f,g,p);c.addClass('menu-rightarrow');c.append(g)}});$("#"+p.rendto).append(m)}}}})};var s={init:function(d){return this.each(function(){var a=$(this);var b=a.data('sgMenu');if(typeof(b)=='undefined'){var c={datatype:'json',url:'tree.json',level:0,parentMenu:null,rendto:null,onclick:function(){}};b=$.extend({},c,d);a.data('sgMenu',b)}else{b=$.extend({},b,d)}q(a,b)})},destroy:function(b){return $(this).each(function(){var a=$(this);a.removeData('sgMenu')})},val:function(a){var b=this.eq(0).html();return b}};$.fn.sgMenu=function(){var a=arguments[0];if(s[a]){a=s[a];arguments=Array.prototype.slice.call(arguments,1)}else if(typeof(a)=='object'||!a){a=s.init}else{$.error('Method '+a+' does not exist on jQuery.sgMenu');return this}return a.apply(this,arguments)}})(jQuery);