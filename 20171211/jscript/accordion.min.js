(function($){var l=function(b,c){$.ajax({type:"POST",async:false,url:c.url,dataType:"json",success:function(a){m(a,b,c)}});b.css("width",c.width);n(b,c)};var m=function(h,i,j){$.each(h,function(k,v){var e=$("<li class='accordion_li'></li>");var f=$("<ul></ul>");e.append(v.title);if(v.type==2){e.append("("+v.items.length+")");$.each(v.items,function(a,b){var c=$("<li class='accordion_ul_li'></li>");if(b.isurl){var d=$("<a></a>");d.append(b.content);d.attr("href","javascript:void(0);");d.attr("title","点击查看详情");d.on("click",function(){(j.onclick)(b)});c.append(d)};f.append(c)})}else if(v.type==3){$.each(v.items,function(a,b){var c=$("<div></div>");c.css("width",j.width-2);c.css("height",60);c.css("border","1px solid #999");c.css("overflow","auto");c.append(b.content);f.append(c)})}else if(v.type==4){var g=$("<div></div>");g.load(v.src);g.css("width",j.width-2);g.css("height",j.div_height);g.css("overflow-x","hidden");f.append(g)}else{$.each(v.items,function(a,b){var c=$("<li class='accordion_ul_li'></li>");c.append(b.key+"：");if(b.isurl){var d=$("<a></a>");d.append(b.value);d.attr("href","javascript:void(0);");d.attr("title","点击查看详情");d.on("click",function(){(j.onclick)(b)});c.append(d)}else{c.append(b.value)};f.append(c)})};i.append(e);i.append(f)})};var n=function(b,c){if(!c.isexpend){b.children("ul").hide();b.children("ul:first").show();b.children("li:first").removeClass();b.children("li:first").addClass('accordion_li_open');$("li",b).click(function(){var a=$(this).next();if((a.is("ul"))&&(a.is(":visible"))){return false};if((a.is("ul"))&&(!a.is(":visible"))){b.children("ul:visible").slideUp("normal");a.slideDown("normal");b.children("li").removeClass();b.children("li").addClass("accordion_li");$(this).removeClass();$(this).addClass("accordion_li_open");return false}})}};var o={init:function(d){return this.each(function(){var a=$(this);var b=a.data("sgAccordion");if(typeof(b)=="undefined"){var c={url:"accordion.json",width:300,div_height:200,isexpend:true,onclick:function(){}};b=$.extend({},c,d);a.data("sgAccordion",b)}else{b=$.extend({},b,d)}l(a,b)})},destroy:function(b){return $(this).each(function(){var a=$(this);a.removeData("sgAccordion")})},val:function(a){var b=this.eq(0).html();return b}};$.fn.sgAccordion=function(){var a=arguments[0];if(o[a]){a=o[a];arguments=Array.prototype.slice.call(arguments,1)}else if(typeof(a)=="object"||!a){a=o.init}else{$.error("Method "+a+" does not exist on jQuery.sgAccordion");return this};return a.apply(this,arguments)}})(jQuery);